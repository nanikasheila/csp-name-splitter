{
  "$schema": "../gate-profiles.schema.json",
  "profiles": {
    "experimental": {
      "analysis_gate":       { "required": false, "description": "実験段階では影響分析をスキップ可能" },
      "design_gate":         { "required": false, "description": "architect エスカレーション不要" },
      "plan_gate":           { "required": false, "description": "形式的な計画策定は不要" },
      "implementation_gate": { "required": true,  "description": "コードの存在は最低限必要" },
      "test_gate":           { "required": false, "description": "テスト不要。手動確認のみでも可" },
      "review_gate":         { "required": false, "description": "セルフレビューのみ。reviewer スキップ可" },
      "documentation_gate":  { "required": false, "description": "ドキュメント不要" },
      "submit_gate":         { "required": true,  "description": "コミット・プッシュは必要" }
    },
    "development": {
      "analysis_gate":       { "required": true,  "description": "影響分析を実施する" },
      "design_gate":         { "required": "on_escalation", "escalation_condition": "artifacts.impact_analysis.escalation.required == true", "description": "エスカレーション基準に該当する場合のみ architect を起動" },
      "plan_gate":           { "required": true,  "description": "manager による実行計画を策定する" },
      "implementation_gate": { "required": true,  "description": "コード実装の完了を確認" },
      "test_gate":           { "required": true,  "pass_rate": 100, "coverage_min": 70, "description": "主要パスのテスト PASS + カバレッジ 70% 以上" },
      "review_gate":         { "required": true,  "checks": ["logic", "security_basic"], "description": "ロジック + 基本セキュリティチェック" },
      "documentation_gate":  { "required": false, "description": "必要に応じて実施" },
      "submit_gate":         { "required": true,  "description": "PR 作成・マージ" }
    },
    "stable": {
      "analysis_gate":       { "required": true,  "description": "影響分析を実施し、API 互換性を特に重視" },
      "design_gate":         { "required": "on_escalation", "escalation_condition": "artifacts.impact_analysis.escalation.required == true OR len(artifacts.impact_analysis.affected_files) >= 2", "description": "エスカレーション閾値を引き下げ（2モジュール以上で発動）" },
      "plan_gate":           { "required": true,  "description": "manager による実行計画を策定する" },
      "implementation_gate": { "required": true,  "description": "コード実装の完了を確認" },
      "test_gate":           { "required": true,  "pass_rate": 100, "coverage_min": 85, "description": "全テスト PASS + カバレッジ 85% 以上" },
      "review_gate":         { "required": true,  "checks": ["logic", "security_deep", "test_quality"], "description": "ロジック + 深層セキュリティ + テスト品質" },
      "documentation_gate":  { "required": true,  "description": "ドキュメント更新必須" },
      "submit_gate":         { "required": true,  "description": "PR 作成・マージ" }
    },
    "release-ready": {
      "analysis_gate":       { "required": true,  "description": "全変更で影響分析を実施" },
      "design_gate":         { "required": true,  "description": "全変更で architect による構造確認を実施" },
      "plan_gate":           { "required": true,  "description": "manager による実行計画を策定する" },
      "implementation_gate": { "required": true,  "description": "コード実装の完了を確認" },
      "test_gate":           { "required": true,  "pass_rate": 100, "coverage_min": 90, "regression_required": true, "description": "全テスト PASS + カバレッジ 90% 以上 + 回帰テスト" },
      "review_gate":         { "required": true,  "checks": ["logic", "security_deep", "architecture", "performance", "test_quality"], "description": "全観点でのフルレビュー" },
      "documentation_gate":  { "required": true,  "description": "ドキュメント更新・リリースノート必須" },
      "submit_gate":         { "required": true,  "description": "PR 作成・マージ" }
    },
    "sandbox": {
      "analysis_gate":       { "required": true,  "description": "影響分析を実施する" },
      "design_gate":         { "required": "on_escalation", "escalation_condition": "artifacts.impact_analysis.escalation.required == true", "description": "エスカレーション基準に該当する場合のみ architect を起動" },
      "plan_gate":           { "required": true,  "description": "manager による実行計画を策定する" },
      "implementation_gate": { "required": true,  "description": "コード実装の完了を確認" },
      "test_gate":           { "required": true,  "pass_rate": 100, "coverage_min": 70, "description": "主要パスのテスト PASS + カバレッジ 70% 以上" },
      "review_gate":         { "required": true,  "checks": ["logic", "security_basic"], "description": "ロジック + 基本セキュリティチェック" },
      "documentation_gate":  { "required": false, "description": "sandbox では不要" },
      "submit_gate":         { "required": "blocked", "description": "main マージ禁止。sandbox は worktree 内で完結する検証専用" }
    }
  }
}
